## Router

Router는 Path Determination(경로결정)과 Switching(스위칭)을 주로 하는 장비이다. 데이터 패킷이 목적지까지 가는 길을 검사하고 어떤 경로로 패킷이 가는것이 적절한지 판단하는 장치이다. 목적지까지 가는 방법이 결정되면 그 방향으로 패킷을 보내는 것이 스위칭 이다.

## Routing Protocol

Routing Protocol은 패킷이 목적지까지 가는 방법을 결정해주는 프로토콜이다. RIP, OSPF, IGRP, BGP 등이 있으며 라우팅 테이브을 참조해 가장 좋은 길로 패킷을 전송시킨다.

라우팅 프로토콜은 Static과 Dynamic프로토콜로 구분된다. Static라우팅은 정적으로 라우팅을 관리하는 것을 의미한다. 즉 사람이 직접 경로를 결정해 주고, 라우터는 입력받은 경로로만 패킷을 전송시키는 방법을 의미한다. Static 라우팅은 라우팅 테이블을 교환하지 않고 라우팅이 가능하기 때문에 네트워크 대역폭을 절약할 수 있다. Dynamic 라우팅은 이와 반대로 자동으로 경로가 결정되는 프로토콜이다. 즉 라우터가 판단하여 가장 효율적인 방법으로 패킷을 전송시키는 방법이다.

## RIP

RIP (Routing Information Protocol)은 최소 Hop Count를 파악하여 라우팅하는 프로토콜이다. Distance Vector (거리+방향으로 길을 찾아가는) 다이나믹 라우팅 프로토콜이다. RIP 프로토콜은 라우팅되는 Hop count가 가장 적은 경로를 택하여 라우팅하는 프로토콜로, Routing Table에 인접 라우터 정보를 저장하여 경로를 결정한다. 최대 Hop Count는 15로, 거리가 짧기 때문에 내부용으로 많이 이용한다.

직접 연결되어 있는 라우터는 Hop으로 계산하지 않고, 30초 주기로 default routing을 업데이트 하여 인접 라우터로 정보를 전송한다. 또한 4개~6개까지 로드밸런싱이 가능하다는 특징이 있다. 주로 UDP 세그먼트에 캡슐화 되어 사용된다.

## OSPF

OSPF(Open Shortest First)는 최단 경로 우선 프로토콜이다. 최저 COST(최소 시간) 경로를 최적 라우팅 경로로 결정하는 것이다. 가장 대표적인 링크 상태 프로토콜로, SPF(최단 거리 우선 알고리즘) 을 통해 라우팅 테이블을 생성한다. 주로 내부 게이트웨이 프로토콜로 대규모 기업망에서 사용된다. 특히 Area라는 개념을 사용하여 전체 네트워크를 작은 영역으로 나눠 효율적으로 관리하는 방식을 택한다. 각 Area는 Back Bone Area 에 연결되어 있다. 또한 RIP가 30초마다  update 되어 정보를 전송시켜주는 반면에  OSPF는 링크 상태에 변화가 있을 시 즉각적으로 Flooding을 해주기 때문에 컨버전스 타임이 매우 빠르다.

OSPF는 Hello 패킷을 보내 인접 라우터들을 찾는다. OSPF 라우터 간에 공유하는 라투어 ID를 통하여 Hello 패킷을 전송하게 되는데, 이 때 브로드캐스트(255.255.255.255)가 아닌 멀티캐스르 주소(224.0.0.5)로 전송한다. Hello 패킷 안에는 DR, BDR을 결정하기 위한 Priority 필드가 존재한다. OSPF 라우터는 헬로 패킷 송수신을 통하여 Neighbor 관계를 유지한다. 또한 VLSM(Variable Length Subnet Mask)를 지원하기 때문에 IP 주소를 효율적으로 사용할 수 있고 라우팅 테이블을 줄일 수 있다.

# 용어 정리

Hop (홉) = 데이터통신망에서 각 패킷에 매 노드 (또는 라우터)를 건너가는 양상을 비유적으로 표현

멀티캐스트 =  1대N

브로드캐스트 = 모두에게 모든 신호를 보내고 모두가 모든 신호를 듣는 것 

컨버전스 = 융합
